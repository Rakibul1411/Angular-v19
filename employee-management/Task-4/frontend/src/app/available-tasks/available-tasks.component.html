<div class="bg-white shadow rounded-lg overflow-hidden">
  <div class="px-4 py-3 bg-gray-50 border-b">
    <h3 class="text-lg font-medium">Available Tasks</h3>
    <p *ngIf="!selectedEmployeeId" class="text-sm text-orange-600 mt-1">
      Please select an employee first to enable task selection
    </p>
  </div>

  <table class="min-w-full">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-4 py-3 text-left">
          <input type="checkbox" class="w-4 h-4 text-blue-600 rounded" disabled title="Select all tasks">
        </th>
        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Name</th>
        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Task Code</th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <tr *ngFor="let task of tasks"
          [class]="selectedEmployeeId ? 'hover:bg-gray-50 cursor-pointer' : 'opacity-60 cursor-not-allowed'">
        <td class="px-4 py-3">
          <input
            type="checkbox"
            [disabled]="!selectedEmployeeId"
            [checked]="isTaskSelected(task.id)"
            (change)="onTaskCheckboxChange(task.id, $any($event.target).checked)"
            [title]="selectedEmployeeId ? 'Select task: ' + task.taskName : 'Please select an employee first'"
            [attr.aria-label]="selectedEmployeeId ? 'Select task: ' + task.taskName : 'Please select an employee first'"
            [class]="!selectedEmployeeId
              ? 'w-4 h-4 text-gray-300 rounded cursor-not-allowed opacity-50'
              : 'w-4 h-4 text-blue-600 rounded focus:ring-blue-500 cursor-pointer'">
        </td>
        <td class="px-4 py-3 text-sm font-medium"
            [class]="selectedEmployeeId ? 'text-gray-900' : 'text-gray-400'">
          {{ task.taskName }}
        </td>
        <td class="px-4 py-3 text-sm"
            [class]="selectedEmployeeId ? 'text-gray-500' : 'text-gray-300'">
          {{ task.taskCode }}
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="tasks.length === 0" class="text-center py-8">
    <p class="text-gray-500 text-lg">No tasks available</p>
    <p class="text-gray-400 text-sm mt-2">Create some tasks first to assign them</p>
  </div>
</div>

<!-- Action buttons section -->
<div class="mt-6 flex justify-end gap-2">
  <button
    *ngIf="isEditMode"
    (click)="onCancelEdit()"
    class="px-6 py-2 rounded-lg font-medium bg-gray-500 hover:bg-gray-600 text-white transition duration-200">
    Cancel
  </button>
  <button
    (click)="onAssignTasks()"
    [disabled]="!selectedEmployeeId || selectedTasks.length === 0"
    [class]="selectedEmployeeId && selectedTasks.length > 0
      ? 'bg-blue-600 hover:bg-blue-700 text-white'
      : 'bg-gray-300 text-gray-500 cursor-not-allowed'"
    class="px-6 py-2 rounded-lg font-medium transition duration-200">
    {{ isEditMode ? 'Update Assignment' : 'Assign Tasks' }}
  </button>
</div>
