<div class="min-h-screen flex items-center justify-center bg-linear-to-br from-purple-600 via-purple-700 to-indigo-800 p-4">
  <div class="w-full max-w-md">
    <p-card>
      <!-- Header -->
      <ng-template pTemplate="header">
        <div class="text-center pt-6 px-6">
          <h1 class="text-3xl font-bold text-gray-800 mb-2">Create Account</h1>
          <p class="text-gray-600 text-sm">Join our Smart Library Management System</p>
        </div>
      </ng-template>

      <!-- Content -->
      <ng-template pTemplate="content">
        <div class="px-6 pb-6">
          <!-- Success Message -->
          @if (successMessage()) {
            <p-message severity="success" [text]="successMessage()!" styleClass="mb-4 w-full" />
          }

          <!-- Error Message -->
          @if (errorMessage()) {
            <p-message severity="error" [text]="errorMessage()!" styleClass="mb-4 w-full" />
          }

          <!-- Register Form -->
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-5">

            <!-- Name Field -->
            <div class="flex flex-col gap-2">
              <label for="name" class="text-sm font-semibold text-gray-700">Full Name</label>
              <input
                pInputText
                id="name"
                formControlName="name"
                placeholder="Enter your full name"
                class="w-full"
                [class.ng-invalid]="isFieldInvalid('name')"
                [class.ng-dirty]="isFieldInvalid('name')"
              />
              @if (hasError('name', 'required')) {
                <small class="text-red-600">Name is required</small>
              }
              @if (hasError('name', 'minlength')) {
                <small class="text-red-600">Name must be at least 3 characters</small>
              }
            </div>

            <!-- Email Field -->
            <div class="flex flex-col gap-2">
              <label for="email" class="text-sm font-semibold text-gray-700">Email Address</label>
              <input
                pInputText
                id="email"
                type="email"
                formControlName="email"
                placeholder="Enter your email"
                class="w-full"
                [class.ng-invalid]="isFieldInvalid('email')"
                [class.ng-dirty]="isFieldInvalid('email')"
              />
              @if (hasError('email', 'required')) {
                <small class="text-red-600">Email is required</small>
              }
              @if (hasError('email', 'email')) {
                <small class="text-red-600">Please enter a valid email</small>
              }
            </div>

            <!-- Password Field -->
            <div class="flex flex-col gap-2">
              <label for="password" class="text-sm font-semibold text-gray-700">Password</label>
              <p-password
                formControlName="password"
                [toggleMask]="true"
                [feedback]="false"
                placeholder="Enter your password"
                styleClass="w-full"
                inputStyleClass="w-full"
                [class.ng-invalid]="isFieldInvalid('password')"
                [class.ng-dirty]="isFieldInvalid('password')"
              />
              @if (hasError('password', 'required')) {
                <small class="text-red-600">Password is required</small>
              }
              @if (hasError('password', 'minlength')) {
                <small class="text-red-600">Password must be at least 6 characters</small>
              }
            </div>

            <!-- Confirm Password Field -->
            <div class="flex flex-col gap-2">
              <label for="confirmPassword" class="text-sm font-semibold text-gray-700">Confirm Password</label>
              <p-password
                formControlName="confirmPassword"
                [toggleMask]="true"
                [feedback]="false"
                placeholder="Confirm your password"
                styleClass="w-full"
                inputStyleClass="w-full"
                [class.ng-invalid]="isFieldInvalid('confirmPassword')"
                [class.ng-dirty]="isFieldInvalid('confirmPassword')"
              />
              @if (hasError('confirmPassword', 'required')) {
                <small class="text-red-600">Please confirm your password</small>
              }
              @if (hasError('confirmPassword', 'passwordMismatch')) {
                <small class="text-red-600">Passwords do not match</small>
              }
            </div>

            <!-- Role Selection -->
            <div class="flex flex-col gap-2">
              <label for="role" class="text-sm font-semibold text-gray-700">Register As</label>
              <p-select
                formControlName="role"
                [options]="roleOptions"
                placeholder="Select a role"
                styleClass="w-full"
                [class.ng-invalid]="isFieldInvalid('role')"
                [class.ng-dirty]="isFieldInvalid('role')"
              />
              @if (hasError('role', 'required')) {
                <small class="text-red-600">Please select a role</small>
              }
            </div>

            <!-- Submit Button -->
            <p-button
              type="submit"
              label="Create Account"
              [loading]="isLoading()"
              [disabled]="isLoading()"
              styleClass="w-full"
              severity="contrast"
            />

            <!-- Login Link -->
            <div class="text-center pt-4 border-t border-gray-200">
              <p class="text-sm text-gray-600">
                Already have an account?
                <a routerLink="/login" class="text-purple-600 hover:text-purple-800 font-semibold hover:underline ml-1">
                  Sign In
                </a>
              </p>
            </div>
          </form>
        </div>
      </ng-template>
    </p-card>
  </div>
</div>
