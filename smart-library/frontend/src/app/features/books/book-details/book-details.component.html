<div class="min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-3xl mx-auto">
    <p-card>
      <ng-template pTemplate="header">
        <div class="flex items-center justify-between p-6 border-b border-gray-200">
          <h2 class="text-2xl font-bold text-gray-900">Book Details</h2>
          <p-button
            icon="pi pi-arrow-left"
            [text]="true"
            [rounded]="true"
            severity="secondary"
            (onClick)="goBack()"
            pTooltip="Back to Books"
            tooltipPosition="left"
          ></p-button>
        </div>
      </ng-template>

      <div class="p-6">
        @if (loading) {
          <div class="space-y-4">
            <p-skeleton width="100%" height="3rem"></p-skeleton>
            <p-skeleton width="80%" height="2.5rem"></p-skeleton>
            <p-skeleton width="60%" height="2rem"></p-skeleton>
            <p-skeleton width="40%" height="2rem"></p-skeleton>
          </div>
        } @else if (book) {
          <div class="space-y-6">
            <div class="bg-white rounded-lg p-6 border border-gray-200">
              <div class="space-y-5">
                <div>
                  <label class="block text-sm font-semibold text-gray-600 mb-2">Book Title</label>
                  <p class="text-2xl text-gray-900 font-bold">{{ book.title }}</p>
                </div>

                <div>
                  <label class="block text-sm font-semibold text-gray-600 mb-2">Author</label>
                  <p class="text-xl text-gray-800">{{ book.author }}</p>
                </div>

                <div>
                  <label class="block text-sm font-semibold text-gray-600 mb-2">ISBN</label>
                  <p class="text-lg text-gray-700 font-mono">{{ book.isbn }}</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                  <div>
                    <label class="block text-sm font-semibold text-gray-600 mb-2">Total Copies</label>
                    <p class="text-2xl text-gray-900 font-bold">{{ book.copies }}</p>
                  </div>

                  <div>
                    <label class="block text-sm font-semibold text-gray-600 mb-2">Available Copies</label>
                    <p class="text-2xl font-bold" [class.text-green-600]="book.available_copies > 0" [class.text-red-600]="book.available_copies === 0">
                      {{ book.available_copies }}
                    </p>
                  </div>
                </div>

                <div>
                  <label class="block text-sm font-semibold text-gray-600 mb-2">Availability Status</label>
                  <div class="mt-2">
                    @if (book.available_copies > 0) {
                      <p-tag severity="success" value="Available for Borrowing" styleClass="text-base font-semibold py-2 px-4"></p-tag>
                    } @else {
                      <p-tag severity="danger" value="Currently Unavailable" styleClass="text-base font-semibold py-2 px-4"></p-tag>
                    }
                  </div>
                </div>

                @if (book.createdAt) {
                  <div>
                    <label class="block text-sm font-semibold text-gray-600 mb-2">Added On</label>
                    <p class="text-lg text-gray-700">{{ book.createdAt | date: 'MMM d, y, h:mm a' }}</p>
                  </div>
                }
              </div>
            </div>

            <div class="flex gap-3 pt-4 border-t border-gray-200">
              @if (book.available_copies > 0) {
                <p-button
                  label="Borrow This Book"
                  icon="pi pi-book"
                  severity="success"
                  (onClick)="borrowBook()"
                  styleClass="px-6"
                ></p-button>
              }

              @if (isAdmin) {
                <p-button
                  label="Edit Book"
                  icon="pi pi-pencil"
                  severity="warn"
                  (onClick)="editBook()"
                  styleClass="px-6"
                ></p-button>
              }
            </div>
          </div>
        } @else {
          <div class="text-center py-12">
            <i class="pi pi-book text-gray-400 text-6xl mb-4"></i>
            <p class="text-xl text-gray-600">Book not found</p>
            <p class="text-gray-500 mt-2">The requested book could not be found.</p>
          </div>
        }
      </div>
    </p-card>
  </div>
</div>
